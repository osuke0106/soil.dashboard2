<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>åœŸå£Œè¨ºæ–­ãƒãƒƒãƒ—</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    body { margin: 0; }
    #map { height: 100vh; }
  </style>
</head>
<body>
  <div id="map"></div>
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    const map = L.map('map').setView([35.9912, 139.0834], 14);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    fetch('soil.json')
      .then(res => res.json())
      .then(data => {
        data.forEach(soil => {
          // æ˜Ÿã®ç”Ÿæˆé–¢æ•°
          const stars = (n) => 'â˜…'.repeat(n) + 'â˜†'.repeat(5-n);
          
          const popupContent = `
            <strong>${soil.name}</strong><br>
            <img src="${soil.story_image}" style="width:100%; max-width:180px; border-radius:4px; margin:8px 0;"><br>
            è©•ä¾¡ï¼š${soil.rank}<br>
            ${soil.summary}<br><br>
            ğŸš ãŠã„ã—ã•ï¼š${stars(soil.brand_scores.taste)}<br>
            ğŸŒ ç’°å¢ƒï¼š${stars(soil.brand_scores.environment)}<br>
            ğŸ›¡ å®‰å…¨ï¼š${stars(soil.brand_scores.safety)}<br><br>
            <a href="soil.html?id=${soil.soil_id}">è©³ç´°è¨ºæ–­ã‚’è¦‹ã‚‹</a>
          `;
          L.marker([soil.lat, soil.lng])
            .addTo(map)
            .bindPopup(popupContent);
        });
      });
  </script>
</body>
</html>